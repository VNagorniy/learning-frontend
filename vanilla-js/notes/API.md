## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [Performance API](#—á—Ç–æ-—Ç–∞–∫–æ–µ-performance-api-–≤-javascript-–∏-–∑–∞—á–µ–º-–æ–Ω-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [AbortController](#‚öôÔ∏è-—á—Ç–æ-—Ç–∞–∫–æ–µ-abortcontroller-–≤-javascript-–∏-–∑–∞—á–µ–º-–æ–Ω-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [AbortSignal.timeout()](#abortsignaltimeout)

## –ß—Ç–æ —Ç–∞–∫–æ–µ Performance API –≤ JavaScript –∏ –∑–∞—á–µ–º –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

**Performance API** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã. –û–Ω –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.

‚û°Ô∏è –ü—Ä–∏–º–µ—Ä:

```js
const start = performance.now(); // –ù–∞—á–∞–ª–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
for (let i = 0; i < 1e6; i++) {}

const end = performance.now(); // –ö–æ–Ω–µ—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
console.log(`–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${end - start}ms`);
```

üó£Ô∏è –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ Performance API –∏–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–∏–∫–ª–∞. –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞.

<hr/>

## ‚öôÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ AbortController –≤ JavaScript –∏ –∑–∞—á–µ–º –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

**AbortController** ‚Äî —ç—Ç–æ API, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–º–µ–Ω—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å—ã fetch. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã.

‚û°Ô∏è –ü—Ä–∏–º–µ—Ä:

```js
const controller = new AbortController();
const signal = controller.signal;

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã
fetch('https://jsonplaceholder.typicode.com/posts', { signal })
	.then((response) => response.json())
	.then((data) => console.log(data))
	.catch((err) => {
		if (err.name === 'AbortError') {
			console.log('–ó–∞–ø—Ä–æ—Å –±—ã–ª –æ—Ç–º–µ–Ω—ë–Ω');
		} else {
			console.error(err);
		}
	});

// –û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ 500 –º—Å
setTimeout(() => controller.abort(), 500);
```

üó£Ô∏è –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ AbortController –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ 500 –º—Å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω—É–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ.
–ü–æ–¥—Ä–æ–±–Ω–µ–µ [—Ç—É—Ç](https://developer.mozilla.org/ru/docs/Web/API/AbortController)

<hr/>

## AbortSignal.timeout

–î–æ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø—Ä–∏–±–µ–≥–∞—Ç—å –∫ –∫–æ—Å—Ç—ã–ª—è–º –≤—Ä–æ–¥–µ Promise.race(), –∏–ª–∏ –ø–∏—Å–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ —Å AbortController —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è fetch(). –ù–æ —Ç–µ–ø–µ—Ä—å –≤ JavaScript –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–∞—Ç–∏–≤–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Äî –º–µ—Ç–æ–¥ **AbortSignal.timeout()**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏ —É–¥–æ–±–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤.

‚ÑπÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```js
try {
	const response = await fetch('https://api.example.com/data', {
		signal: AbortSignal.timeout(3000) // 3 —Å–µ–∫—É–Ω–¥—ã
	});
	const data = await response.json();
	console.log(data);
} catch (err) {
	console.error('–ó–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏', err);
}
```

‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞

‚Äî –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **AbortSignal.timeout(3000)** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ –≤ 3 —Å–µ–∫—É–Ω–¥—ã. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –ø—Ä–∏–¥—ë—Ç –∑–∞ —ç—Ç–æ –≤—Ä–µ–º—è, –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—ë–Ω.

‚Äî –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –¥–∞–Ω–Ω—ã–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.

‚Äî –ï—Å–ª–∏ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å—Ç–µ—á—ë—Ç, –º—ã –ª–æ–≤–∏–º –æ—à–∏–±–∫—É –∏ –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏.

üìå –≠—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è, –Ω–æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –ø–æ–ª–µ–∑–Ω–∞—è —Ñ–∏—á–∞. –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω—É–∂–Ω—ã –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞, –∏ —Ç–µ–ø–µ—Ä—å –Ω–µ –Ω–∞–¥–æ –º—É—á–∏—Ç—å—Å—è —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏. –ü—Ä–æ—Å—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ—á–∫–∞, –∏ –º–æ–∂–Ω–æ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –±—É–¥—É—Ç –≤–∏—Å–µ—Ç—å –≤–µ—á–Ω–æ.

<hr>
